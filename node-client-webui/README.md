# ğŸš€ Node Client Web UI Project

This project provides a containerized environment using **Docker Compose** to launch the **Node Client Web UI** with automatic **self-signed TLS certificate generation**.

---

## ğŸ“‚ Project Structure

```
docker-compose/
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ .env.example
â”œâ”€â”€ data/       # Persistent application data
â”œâ”€â”€ openssl/    # Certificates and Keys folder
â””â”€â”€ README.md
```

---

## ğŸ” Environment Variables and Authentication Configuration

The Node Client Web UI credentials are configured using environment variables loaded from a .env file.

**Configure Credentials**

Copy the example environment file and edit it:
```bash
cp .env.example .env
```

Edit .env and set the following values:
```
EXTERNAL_IP=IP_OF_MY_MACHINE
WEBUI_USERNAME=MyUsername
WEBUI_PASSWORD=MyPassword
```
 - WEBUI_USERNAME â€“ Username used to log in to the Web UI
 - WEBUI_PASSWORD â€“ Password used to log in to the Web UI
 - EXTERNAL_IP - IP address or DNS name used to access the Web UI.

---

## ğŸ§© Prerequisites

Do not remove files from `data` and `openssl` folder.
One of the following container runtimes must be installed:
 - Docker with native docker compose
   https://docs.docker.com/engine/install/
 - Podman with native podman compose
   https://podman.io/docs/installation

---

## â–¶ï¸ Usage

### â–¶ï¸ Start the stack:
```bash
docker compose up -d
```

Expected output:
```bash
[+] Running 1/1
 âœ” Container node-client-webui                       Started                                                                              1.6s
```

#### ğŸ§  Test
Once started, access the Node Client Web UI in your browser:
- https://EXTERNAL_IP:25080

### ğŸ“˜ Documentation:
https://www.cluster-wizard.com/docs/installation/node-client-webui-deployment

### ğŸ“¦ Self Signed Certificates

Self-signed TLS certificates and private keys are automatically generated by **Node Client Web UI** and stored in the `openssl` directory.
These certificates are reused on subsequent starts unless the files are deleted.


### ğŸ› ï¸ Development Notes
Useful commands:
 - List running containers:
```
docker compose ps
```
- Follow logs:
```
docker compose logs -f node-client-webui
```
- Enter the container shell:
```
docker exec -it node-client-webui sh
```

Expected output of ps (to verify that 3 containers are up):
```bash
docker compose ps

NAME                      IMAGE                                          COMMAND                  SERVICE          CREATED              STATUS                        PORTS
docker ps
CONTAINER ID   IMAGE                                    COMMAND                   CREATED       STATUS       PORTS                                                                                          NAMES
1dca19ad10ad   clusterwizard/node-client-webui:latest   "/bin/sh -c 'set -e\nâ€¦"   2 hours ago   Up 2 hours   0.0.0.0:23051->23051/tcp, :::23051->23051/tcp, 0.0.0.0:25080->25080/tcp, :::25080->25080/tcp   node-client-webui
```


Expected logs for node-client-webui:
```bash
docker compose logs node-client-webui

...
node-client-webui  | TLS cert/key already exist; reusing.
```

### ğŸ§¹ Clean Up

When you are finished, you may remove containers, networks, and volumes.

- **Stop services**:
  ```bash
  docker compose stop
  [+] Stopping 1/1
   âœ” Container node-client-webui  Stopped                                                                                                         10.2s
  cluster-admin@nategateway-vm:~/docker-compose-node-wizard-webui$
  ```

- **Remove containers, networks and volumes**:
  ```bash
  docker compose down -v

  [+] Running 1/0
   âœ” Container node-client-webui  Removed                                                                                                          0.1s
  ```
  âš ï¸ This will delete all persistent data.

- You may also delete the openssl and data directories if you want to redeploy with fresh certificates and state.


### ğŸ’¡ Tips

- ğŸ§ **Using Podman instead of Docker**
  You can run this project with [Podman](https://podman.io/) as a dropâ€‘in replacement for Docker.
  Simply replace `docker` with `podman` in all commands â€” the syntax is the same.


- ğŸ”‘ **Running Docker without `sudo`**
  By default, you may need `sudo` to access the Docker Engine.
  To allow your user to run Docker commands without `sudo`, add yourself to the `docker` group:

  ```bash
  # Create the docker group if it doesn't exist
  sudo groupadd docker

  # Add your user to the docker group
  sudo usermod -aG docker $USER

  # Apply the new group membership (log out and back in)
  ```


- ğŸ”‘ **Running Podman without `sudo`**
  By default, you may need `sudo` to run Podman command because the user socket is not running.
  ```bash
  # Enable the user socket
  systemctl --user enable --now podman.socket
  systemctl --user status podman.socket
  ```

## ğŸ› ï¸ Troubleshooting

- **Login fails with "Network Error".**
  The default deployment uses **self-signed certificates**.
  Both the backend and frontend certificate must be trusted by the browser.

  âœ… **Fix:**
  Open the backend URL once and accept the certificate:
  ```
  https://EXTERNAL_IP:23051
  ```
  Then reload the frontend and try logging in again.
